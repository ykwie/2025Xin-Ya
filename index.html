<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025æ–°èŠ½å¥–å­¦é‡‘èµ„æ ¼æ£€æŸ¥ç³»ç»Ÿï¼ˆ2024çš„SPMæ¯•ä¸šç”Ÿï¼‰</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Noto+Sans:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --tzu-chi-blue: #0066B1;
            --tzu-chi-light-blue: #4D9DE0;
            --tzu-chi-green: #7BA529;
            --tzu-chi-light-green: #A3C853;
            --tzu-chi-gray: #6D6E71;
            --success: #4CAF50;
            --danger: #F44336;
            --light: #f8f9fa;
            --dark: #343a40;
            --section-bg: #e0edff;
            --other-subjects-bg: #ffe8cc;
        }
        
        body {
            font-family: 'Noto Sans SC', 'Noto Sans', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            transition: all 0.3s;
        }
        
        .header {
            background: linear-gradient(135deg, var(--tzu-chi-blue), var(--tzu-chi-light-blue));
            color: white;
            padding: 2rem 0;
            text-align: center;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 600;
        }
        
        .header p {
            margin: 0.5rem 0 0;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark);
        }
        
        input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
            box-sizing: border-box;
            text-align: left;
        }
        
        input[type="text"]:focus, input[type="number"]:focus, select:focus {
            border-color: var(--tzu-chi-blue);
            box-shadow: 0 0 0 3px rgba(0, 102, 177, 0.2);
            outline: none;
        }
        
        .grades-container {
            display: flex;
            gap: 20px;
            margin: 2rem 0;
        }
        
        .grades-column {
            flex: 1;
        }
        
        .grade-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .grade-row:last-child {
            border-bottom: none;
        }
        
        .grade-label {
            font-weight: 500;
            min-width: 40px;
        }
        
        .grade-input {
            width: 70px;
            padding: 8px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 6px;
        }
        
        .btn {
            display: block;
            background: linear-gradient(135deg, var(--tzu-chi-blue), var(--tzu-chi-light-blue));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: auto;
            margin: 0 auto;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            opacity: 0.9;
        }
        
        .result {
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 2rem;
            text-align: center;
            display: none;
            animation: fadeIn 0.5s ease-out;
        }
        
        .eligible {
            background: linear-gradient(135deg, var(--success), #45a049);
            color: white;
        }
        
        .not-eligible {
            background: linear-gradient(135deg, var(--danger), #d32f2f);
            color: white;
        }
        
        .result h3 {
            margin-top: 0;
            font-size: 1.5rem;
        }
        
        .result p {
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .result a {
            color: white;
            text-decoration: underline;
            font-weight: 500;
            display: inline-block;
            margin-top: 1rem;
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s;
        }
        
        .result a:hover {
            background: rgba(255,255,255,0.3);
            text-decoration: none;
        }
        
        .footer {
            text-align: center;
            padding: 1.5rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        .total-subjects {
            padding: 12px;
            text-align: center;
            margin: 1rem 0;
            font-weight: 500;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #f8f9fa;
        }
        
        .language-switcher {
            text-align: right;
            margin-bottom: 1rem;
        }
        
        .language-btn {
            background: none;
            border: none;
            color: var(--tzu-chi-blue);
            cursor: pointer;
            font-size: 14px;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .language-btn:hover {
            background-color: rgba(0, 102, 177, 0.1);
        }
        
        .language-btn.active {
            background-color: var(--tzu-chi-blue);
            color: white;
        }
        
        .quote {
            font-style: italic;
            margin-top: 2rem;
            padding: 1rem;
            border-top: 1px solid #eee;
            text-align: center;
            color: var(--tzu-chi-gray);
        }
        
        .warning {
            background-color: #FFF3CD;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #FFC107;
        }
        
        .criteria-list {
            margin-top: 0.5rem;
            padding-left: 1.5rem;
        }
        
        .subject-section {
            background-color: var(--section-bg);
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
        }
        
        .subject-row {
            display: flex;
            gap: 20px;
            margin-bottom: 1rem;
        }
        
        .subject-col {
            flex: 1;
        }
        
        .other-subjects {
            background-color: var(--other-subjects-bg);
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
        }
        
        .other-subjects-title {
            font-weight: 500;
            margin-bottom: 1rem;
            color: var(--dark);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .grades-container {
                flex-direction: column;
                gap: 10px;
            }
            
            .grade-input {
                width: 60px;
            }
            
            .subject-row {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1 id="main-title">2025æ–°èŠ½å¥–å­¦é‡‘èµ„æ ¼æ£€æŸ¥ç³»ç»Ÿï¼ˆ2024çš„SPMæ¯•ä¸šç”Ÿï¼‰</h1>
            <p id="sub-title">ç”±æ…ˆæµå¿—å·¥å¡«å†™</p>
        </div>
    </div>
    
    <div class="container">
        <div class="language-switcher">
            <button class="language-btn active" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
            <button class="language-btn" onclick="switchLanguage('en')">English</button>
        </div>
        
        <div class="card">
            <div class="warning">
                <strong id="criteria-title">ç”³è¯·æ¡ä»¶ï¼š</strong> 
                <ol class="criteria-list" id="criteria-text">
                    <li>BM å’Œ Sejarah å¿…é¡»è·å¾— Credit (Cæˆ–ä»¥ä¸Š)</li>
                    <li>è‡³å°‘ 5ç§‘ Credit (Cæˆ–ä»¥ä¸Š)</li>
                    <li>BM ã€Sejarah å’Œå¦å¤–3ç§‘æœ€é«˜åˆ†çš„ç§‘ç›® (å…±5ç§‘) å¹³å‡åˆ†éœ€è¶…è¿‡70åˆ†</li>
                </ol>
            </div>
            
            <div class="form-group">
                <label id="student-name-label">å­¦ç”Ÿå§“å Student Name</label>
                <input type="text" id="name" placeholder="è¯·è¾“å…¥å­¦ç”Ÿå§“å Please fill in student name">
            </div>
            
            <div class="subject-section">
                <div class="subject-row">
                    <div class="subject-col">
                        <label id="bm-grade-label">é©¬æ¥æ–‡(BM)æˆç»© Grade</label>
                        <select id="bm-grade">
                            <option value="" selected disabled>è¯·é€‰æ‹© Please select</option>
                            <option value="A+">A+</option>
                            <option value="A">A</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B">B</option>
                            <option value="C+">C+</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="G">G</option>
                            <option value="TH">TH</option>
                        </select>
                    </div>
                    <div class="subject-col">
                        <label id="sejarah-grade-label">å†å²(Sejarah)æˆç»© Grade</label>
                        <select id="sejarah-grade">
                            <option value="" selected disabled>è¯·é€‰æ‹© Please select</option>
                            <option value="A+">A+</option>
                            <option value="A">A</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B">B</option>
                            <option value="C+">C+</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="G">G</option>
                            <option value="TH">TH</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="other-subjects">
                <div class="other-subjects-title" id="other-subjects-title">é™¤äº† BM å’Œ Sejarah çš„å…¶ä»–ç§‘ç›®</div>
                
                <div class="grades-container">
                    <div class="grades-column">
                        <div class="grade-row">
                            <span class="grade-label">A+</span>
                            <input type="number" class="grade-input" id="A+" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">A</span>
                            <input type="number" class="grade-input" id="A" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">A-</span>
                            <input type="number" class="grade-input" id="A-" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">B+</span>
                            <input type="number" class="grade-input" id="B+" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">B</span>
                            <input type="number" class="grade-input" id="B" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">C+</span>
                            <input type="number" class="grade-input" id="C+" min="0" value="0">
                        </div>
                    </div>
                    
                    <div class="grades-column">
                        <div class="grade-row">
                            <span class="grade-label">C</span>
                            <input type="number" class="grade-input" id="C" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">D</span>
                            <input type="number" class="grade-input" id="D" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">E</span>
                            <input type="number" class="grade-input" id="E" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">G</span>
                            <input type="number" class="grade-input" id="G" min="0" value="0">
                        </div>
                        <div class="grade-row">
                            <span class="grade-label">TH</span>
                            <input type="number" class="grade-input" id="TH" min="0" value="0">
                        </div>
                    </div>
                </div>
                
                <div id="total-subjects-display" class="total-subjects">
                    <i class="fas fa-book"></i> <span id="total-subjects-text">æ€»ç§‘ç›®æ•°é‡: 2 ç§‘</span>
                    <span id="subject-note">ï¼ˆé€šå¸¸SPMè€ƒè¯•æœ‰6-10ç§‘ï¼‰</span>
                </div>
            </div>
            
            <button class="btn" onclick="calculateResult()" id="calculate-btn">
                <i class="fas fa-calculator"></i> <span id="calculate-text">æ£€æŸ¥ç»“æœ</span>
            </button>
            
            <div id="result" class="result">
                <!-- ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
            
            <div class="quote" id="wisdom-quote">
                "ç¤¾æœƒçš„å¸Œæœ›åœ¨äººæ‰ï¼Œäººæ‰çš„å¸Œæœ›åœ¨æ•™è‚²ï¼›å®¶åº­çš„å¸Œæœ›åœ¨å­©å­ï¼Œå­©å­çš„å¸Œæœ›ä¹Ÿåœ¨æ•™è‚²ã€‚"
                <br>
                "The hope of the society lies in its talented human resources; while the hope of these talents comes from education."
            </div>
        </div>
    </div>
    
    <div class="footer">
        <div class="container">
            <p id="footer-text">Â© 2025 æ…ˆæµæ–°èŠ½å¥–å­¦é‡‘èµ„æ ¼æ£€æŸ¥ç³»ç»Ÿ | 2025 Xin-Ya Scholarship Eligibility Checker</p>
        </div>
    </div>

    <script>
        // åŒè¯­æ–‡æœ¬
        const translations = {
            zh: {
                title: "2025æ–°èŠ½å¥–å­¦é‡‘èµ„æ ¼æ£€æŸ¥ç³»ç»Ÿï¼ˆ2024çš„SPMæ¯•ä¸šç”Ÿï¼‰",
                subtitle: "ç”±æ…ˆæµå¿—å·¥å¡«å†™",
                criteriaTitle: "ç”³è¯·æ¡ä»¶ï¼š",
                criteriaText: [
                    "BM å’Œ Sejarah å¿…é¡»è·å¾— Credit (Cæˆ–ä»¥ä¸Š)",
                    "è‡³å°‘ 5ç§‘ Credit (Cæˆ–ä»¥ä¸Š)",
                    "BMã€Sejarah å’Œå¦å¤–3ç§‘æœ€é«˜åˆ†çš„ç§‘ç›® (å…±5ç§‘) å¹³å‡åˆ†éœ€è¶…è¿‡70åˆ†"
                ],
                studentName: "å­¦ç”Ÿå§“å Student Name",
                bmGrade: "é©¬æ¥æ–‡(BM)æˆç»© Grade",
                sejarahGrade: "å†å²(Sejarah)æˆç»© Grade",
                otherSubjectsTitle: "é™¤äº† BM å’Œ Sejarah çš„å…¶ä»–ç§‘ç›®",
                calculate: "æ£€æŸ¥ç»“æœ",
                totalSubjects: "æ€»ç§‘ç›®æ•°é‡",
                subjectNote: "ï¼ˆé€šå¸¸SPMè€ƒè¯•æœ‰6-10ç§‘ï¼‰",
                footer: "Â© 2025 æ…ˆæµæ–°èŠ½å¥–å­¦é‡‘èµ„æ ¼æ£€æŸ¥ç³»ç»Ÿ | 2025 Xin-Ya Scholarship Eligibility Checker",
                eligibleTitle: "æ­å–œï¼ğŸ‰",
                eligibleText1: "{name}çš„SPMå¹³å‡åˆ†ä¸º: <strong>{average}</strong> âœ¨",
                eligibleText2: "å·²ç¬¦åˆç”³è¯·æ–°èŠ½å¥–å­¦é‡‘çš„èµ„æ ¼ï¼ğŸŒˆ",
                eligibleButton: "ğŸ“ ç«‹å³å¡«å†™æ–°èŠ½æ¨èè¡¨",
                notEligibleTitle: "æ„Ÿæ©æ£€æŸ¥",
                notEligibleText1: "{name}çš„SPMå¹³å‡åˆ†ä¸º: <strong>{average}</strong>",
                notEligibleText2: "å¾ˆé—æ†¾ï¼Œå­¦ç”Ÿçš„æˆç»©æœªè¾¾åˆ°ç”³è¯·æ–°èŠ½å¥–å­¦é‡‘çš„è¦æ±‚ã€‚",
                notEligibleText3: "è¯·ç»§ç»­é¼“åŠ±å­©å­ï¼Œç›¸ä¿¡æœªæ¥è¿˜æ˜¯æœ‰å¾ˆå¤šæœºä¼šçš„ã€‚æ„Ÿæ©ğŸ™",
                notEligibleReason: "åŸå› :",
                wisdomQuote: "ç¤¾æœƒçš„å¸Œæœ›åœ¨äººæ‰ï¼Œäººæ‰çš„å¸Œæœ›åœ¨æ•™è‚²ï¼›å®¶åº­çš„å¸Œæœ›åœ¨å­©å­ï¼Œå­©å­çš„å¸Œæœ›ä¹Ÿåœ¨æ•™è‚²ã€‚<br>The hope of the society lies in its talented human resources; while the hope of these talents comes from education.",
                reasons: {
                    bmCredit: "BM æœªæ‹¿åˆ° Credit",
                    sejarahCredit: "Sejarah æœªæ‹¿åˆ° Credit",
                    minCredits: "æœªè¾¾åˆ°è‡³å°‘5ç§‘ Credit",
                    averageScore: "5ç§‘ï¼ˆåŒ…æ‹¬ BM & Sejarahï¼‰å¹³å‡åˆ†æœªè¾¾åˆ°70åˆ† (5ç§‘å¹³å‡åˆ†: {average})"
                },
                selectPlaceholder: "è¯·é€‰æ‹©"
            },
            en: {
                title: "2025 Xin-Ya Scholarship Eligibility Checker (For 2024 SPM students)",
                subtitle: "To be filled by Tzu Chi Volunteer",
                criteriaTitle: "Eligibility Criteria:",
                criteriaText: [
                    "BM and Sejarah must get Credit (C or better)",
                    "Minimum 5 Credits (C or better)",
                    "Average score of BM, Sejarah and top 3 other subjects (total 5 subjects) must be more than 70"
                ],
                studentName: "Student Name",
                bmGrade: "Bahasa Melayu (BM) Grade",
                sejarahGrade: "Sejarah Grade",
                otherSubjectsTitle: "Other Subjects (Excluding BM & Sejarah)",
                calculate: "Check Result",
                totalSubjects: "Total Subjects",
                subjectNote: "(Usually SPM has 6-10 subjects)",
                footer: "Â© 2025 Xin-Ya Scholarship Eligibility Checker",
                eligibleTitle: "Congratulations! ğŸ‰",
                eligibleText1: "{name}'s average SPM score is: <strong>{average}</strong> âœ¨",
                eligibleText2: "The student is eligible for the Xin-ya Scholarship! ğŸŒˆ",
                eligibleButton: "ğŸ“ Fill out the Xin-Ya Recommendation Form now",
                notEligibleTitle: "Thank you for checking",
                notEligibleText1: "{name}'s SPM average score: <strong>{average}</strong>",
                notEligibleText2: "Unfortunately, the student's results do not meet the requirements for Xin-ya Scholarship.",
                notEligibleText3: "Please continue to encourage the child. There will be many opportunities in the future. With gratitude ğŸ™",
                notEligibleReason: "Reason:",
                wisdomQuote: "The hope of the society lies in its talented human resources; while the hope of these talents comes from education.<br>ç¤¾æœƒçš„å¸Œæœ›åœ¨äººæ‰ï¼Œäººæ‰çš„å¸Œæœ›åœ¨æ•™è‚²ï¼›å®¶åº­çš„å¸Œæœ›åœ¨å­©å­ï¼Œå­©å­çš„å¸Œæœ›ä¹Ÿåœ¨æ•™è‚²ã€‚",
                reasons: {
                    bmCredit: "BM did not get Credit",
                    sejarahCredit: "Sejarah did not get Credit",
                    minCredits: "Not enough Credits (minimum 5 Credits required)",
                    averageScore: "Average score of 5 subjects (including BM & Sejarah) is below 70 (average: {average})"
                },
                selectPlaceholder: "Please select"
            }
        };

        // å½“å‰è¯­è¨€
        let currentLanguage = 'zh';

        // åˆ‡æ¢è¯­è¨€
        function switchLanguage(lang) {
            currentLanguage = lang;
            updateTexts();
            
            // æ›´æ–°è¯­è¨€æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.includes(lang === 'zh' ? 'ä¸­æ–‡' : 'English')) {
                    btn.classList.add('active');
                }
            });
        }

        // æ›´æ–°æ‰€æœ‰æ–‡æœ¬
        function updateTexts() {
            const t = translations[currentLanguage];
            
            // æ›´æ–°æ ‡é¢˜
            document.getElementById('main-title').textContent = t.title;
            document.getElementById('sub-title').textContent = t.subtitle;
            
            // æ›´æ–°æ¡ä»¶
            document.getElementById('criteria-title').textContent = t.criteriaTitle;
            const criteriaList = document.getElementById('criteria-text');
            criteriaList.innerHTML = '';
            t.criteriaText.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                criteriaList.appendChild(li);
            });
            
            // æ›´æ–°è¡¨å•æ ‡ç­¾
            document.getElementById('student-name-label').textContent = t.studentName;
            document.getElementById('bm-grade-label').textContent = t.bmGrade;
            document.getElementById('sejarah-grade-label').textContent = t.sejarahGrade;
            document.getElementById('other-subjects-title').textContent = t.otherSubjectsTitle;
            
            // æ›´æ–°é€‰æ‹©æ¡†placeholder
            document.querySelectorAll('select').forEach(select => {
                const placeholder = select.querySelector('option[value=""]');
                if (placeholder) {
                    placeholder.textContent = t.selectPlaceholder;
                }
            });
            
            // æ›´æ–°æŒ‰é’®
            document.getElementById('calculate-text').textContent = t.calculate;
            
            // æ›´æ–°é¡µè„š
            document.getElementById('footer-text').textContent = t.footer;
            
            // æ›´æ–°ç§‘ç›®æ€»æ•°æ˜¾ç¤º
            updateTotalSubjectsDisplay();
            
            // æ›´æ–°é™æ€è¯­
            document.getElementById('wisdom-quote').innerHTML = t.wisdomQuote;
        }

        // æ›´æ–°ç§‘ç›®æ€»æ•°æ˜¾ç¤º
        function updateTotalSubjectsDisplay() {
            const t = translations[currentLanguage];
            const total = calculateTotalSubjects();
            document.getElementById('total-subjects-text').textContent = 
                `${t.totalSubjects}: ${total} ${currentLanguage === 'zh' ? 'ç§‘' : 'subjects'}`;
            document.getElementById('subject-note').textContent = t.subjectNote;
        }

        // è®¡ç®—æ€»ç§‘ç›®æ•°
        function calculateTotalSubjects() {
            const grades = ['A+', 'A', 'A-', 'B+', 'B', 'C+', 'C', 'D', 'E', 'G', 'TH'];
            let total = 0;
            
            grades.forEach(grade => {
                const count = parseInt(document.getElementById(grade).value) || 0;
                total += count;
            });
            
            // åŠ ä¸ŠBMå’ŒSejarah
            const bmSelected = document.getElementById('bm-grade').value;
            const sejarahSelected = document.getElementById('sejarah-grade').value;
            if (bmSelected && bmSelected !== '') total++;
            if (sejarahSelected && sejarahSelected !== '') total++;
            
            return total;
        }

        // å®æ—¶æ›´æ–°ç§‘ç›®æ€»æ•°
        document.querySelectorAll('.grade-input, select').forEach(input => {
            input.addEventListener('input', updateTotalSubjectsDisplay);
            input.addEventListener('change', updateTotalSubjectsDisplay);
        });

        function calculateResult() {
            // è·å–å­¦ç”Ÿå§“å
            const name = document.getElementById('name').value || (currentLanguage === 'zh' ? 'åŒå­¦' : 'student');
            
            // å®šä¹‰æˆç»©ç­‰çº§å¯¹åº”çš„åˆ†æ•°
            const gradePoints = {
                'A+': 95,
                'A': 84,
                'A-': 74,
                'B+': 67,
                'B': 62,
                'C+': 57,
                'C': 52,
                'D': 47,
                'E': 42,
                'G': 20,
                'TH': 0
            };
            
            // è·å–BMå’ŒSejarahæˆç»©
            const bmGrade = document.getElementById('bm-grade').value;
            const sejarahGrade = document.getElementById('sejarah-grade').value;
            
            // æ£€æŸ¥æ˜¯å¦å·²é€‰æ‹©BMå’ŒSejarah
            if (!bmGrade || !sejarahGrade) {
                alert(currentLanguage === 'zh' ? 'è¯·é€‰æ‹©BMå’ŒSejarahæˆç»©' : 'Please select BM and Sejarah grades');
                return;
            }
            
            // æ£€æŸ¥BMå’ŒSejarahæ˜¯å¦è¾¾åˆ°Credit (Cæˆ–ä»¥ä¸Š)
            const bmScore = gradePoints[bmGrade];
            const sejarahScore = gradePoints[sejarahGrade];
            
            const t = translations[currentLanguage];
            let reasons = [];
            
            // æ¡ä»¶1: BMå¿…é¡»Credit (Cæˆ–ä»¥ä¸Š)
            if (bmScore < 52) {
                reasons.push(t.reasons.bmCredit);
            }
            
            // æ¡ä»¶2: Sejarahå¿…é¡»Credit (Cæˆ–ä»¥ä¸Š)
            if (sejarahScore < 52) {
                reasons.push(t.reasons.sejarahCredit);
            }
            
            // è®¡ç®—æ‰€æœ‰ç§‘ç›®çš„æˆç»©
            let subjectScores = [];
            
            // æ·»åŠ BMå’ŒSejarah
            subjectScores.push({
                name: 'BM',
                grade: bmGrade,
                score: bmScore
            });
            
            subjectScores.push({
                name: 'Sejarah',
                grade: sejarahGrade,
                score: sejarahScore
            });
            
            // æ·»åŠ å…¶ä»–ç§‘ç›®
            const otherGrades = ['A+', 'A', 'A-', 'B+', 'B', 'C+', 'C', 'D', 'E', 'G', 'TH'];
            
            otherGrades.forEach(grade => {
                const count = parseInt(document.getElementById(grade).value) || 0;
                for (let i = 0; i < count; i++) {
                    subjectScores.push({
                        name: 'Subject ' + (i + 1),
                        grade: grade,
                        score: gradePoints[grade]
                    });
                }
            });
            
            // è®¡ç®—Creditæ•°é‡ (Cæˆ–ä»¥ä¸Š)
            const creditCount = subjectScores.filter(subject => subject.score >= 52).length;
            
            // æ¡ä»¶3: è‡³å°‘5ç§‘Credit
            if (creditCount < 5) {
                reasons.push(t.reasons.minCredits);
            }
            
            // è®¡ç®—5ç§‘å¹³å‡åˆ† (BM, Sejarah + 3ä¸ªæœ€é«˜åˆ†ç§‘ç›®)
            // å…ˆæ’é™¤BMå’ŒSejarah
            const otherSubjects = subjectScores.filter(subject => subject.name !== 'BM' && subject.name !== 'Sejarah');
            
            // æŒ‰åˆ†æ•°æ’åº
            otherSubjects.sort((a, b) => b.score - a.score);
            
            // å–å‰3ä¸ªæœ€é«˜åˆ†
            const top3Subjects = otherSubjects.slice(0, 3);
            
            // è®¡ç®—5ç§‘æ€»åˆ† (BM + Sejarah + top3)
            const totalScore = bmScore + sejarahScore + 
                              (top3Subjects[0]?.score || 0) + 
                              (top3Subjects[1]?.score || 0) + 
                              (top3Subjects[2]?.score || 0);
            
            const averageScore = totalScore / 5;
            
            // æ¡ä»¶4: 5ç§‘å¹³å‡åˆ† >= 70
            if (averageScore < 70 && reasons.length === 0) {
                reasons.push(t.reasons.averageScore.replace('{average}', averageScore.toFixed(2)));
            }
            
            // æ˜¾ç¤ºç»“æœ
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            
            if (reasons.length === 0) {
                // ç¬¦åˆèµ„æ ¼
                resultDiv.className = 'result eligible';
                resultDiv.innerHTML = `
                    <h3>${t.eligibleTitle}</h3>
                    <p>${t.eligibleText1.replace('{name}', name).replace('{average}', averageScore.toFixed(2))}</p>
                    <p>${t.eligibleText2}</p>
                    <a href="https://forms.gle/Mx1sBQUMs7GuLroa9" target="_blank">${t.eligibleButton}</a>
                `;
            } else {
                // ä¸ç¬¦åˆèµ„æ ¼
                resultDiv.className = 'result not-eligible';
                let reasonHtml = '';
                if (reasons.length > 0) {
                    reasonHtml = `<p><strong>${t.notEligibleReason}</strong></p>`;
                    reasonHtml += `<div style="text-align:center;"><ul style="display:inline-block;text-align:left;margin:0;padding-left:20px;">`;
                    reasons.forEach(reason => {
                        reasonHtml += `<li>${reason}</li>`;
                    });
                    reasonHtml += '</ul></div>';
                }
                
                resultDiv.innerHTML = `
                    <h3>${t.notEligibleTitle}</h3>
                    <p>${t.notEligibleText1.replace('{name}', name).replace('{average}', averageScore.toFixed(2))}</p>
                    <p>${t.notEligibleText2}</p>
                    ${reasonHtml}
                    <p>${t.notEligibleText3}</p>
                `;
            }
            
            // æ»šåŠ¨åˆ°ç»“æœä½ç½®
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateTexts();
            updateTotalSubjectsDisplay();
        });
    </script>
</body>
</html>
